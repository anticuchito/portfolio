---
import Layout from "../layouts/Layout.astro";
import { work, projects } from "../lib/data";
import { formatPeriod } from "../lib/date";

const hasProjects = projects && projects.length > 0;
---

<Layout title="Experiencia | Portfolio">
    <div class="max-w-3xl">
        <h1 class="text-4xl md:text-5xl font-bold mb-8">
            EXPERIENCIA <span class="accent">//</span>
        </h1>

        <div class="space-y-6">
            {
                work.map((w) => (
                    <article class="box-brutal p-6 md:p-8 relative">
                        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-2 mb-4">
                            <div>
                                <h2 class="text-xl md:text-2xl font-bold">
                                    {w.position}
                                </h2>
                                <p class="accent font-bold">{w.name}</p>
                            </div>
                            <span class="text-sm text-secondary font-bold border-2 border-brutal px-3 py-1 whitespace-nowrap">
                                {formatPeriod(w.startDate, w.endDate)}
                            </span>
                        </div>
                        <p class="text-secondary leading-relaxed mb-4">
                            {w.summary}
                        </p>
                        {w.highlights && w.highlights.length > 0 && (
                            <ul class="list-disc list-inside space-y-2 text-secondary text-sm">
                                {w.highlights.map((highlight) => (
                                    <li class="leading-relaxed">{highlight}</li>
                                ))}
                            </ul>
                        )}
                    </article>
                ))
            }
        </div>

        <div class="mt-8 p-6 border-4 border-brutal bg-secondary">
            <h3 class="font-bold mb-2">¿QUÉ BUSCO?</h3>
            <p class="text-secondary">
                Busco oportunidades remotas como Full Stack Developer donde
                pueda seguir trabajando con arquitecturas serverless y AWS. Me
                interesan equipos que valoren la autonomía, las buenas prácticas
                y el código bien pensado.
            </p>
        </div>

        <div class="mt-8 flex gap-4">
            {hasProjects && <a href="/proyectos" class="btn-brutal">→ VER PROYECTOS</a>}
            <a href="/contacto" class="btn-brutal">→ CONTACTAR</a>
        </div>
    </div>
</Layout>
